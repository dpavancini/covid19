"0","library(wbstats)"
"0","bm_pop <- wb(country = ""all"", indicator = c(""SP.POP.TOTL"",""SH.MED.BEDS.ZS""),mrv=1,return_wide = T)"
"0","bm_med_beds <- wb(country = ""all"", indicator = c(""SH.MED.BEDS.ZS""),return_wide = T) %>% "
"0","  group_by(iso2c) %>% "
"0","  arrange(desc(date)) %>% "
"0","  slice(1)"
"0",""
"0","dados_com_estatisticas <- dados_completos %>% "
"0","  left_join(bm_pop %>% select(population = ""SP.POP.TOTL"", iso2c)"
"0","              ,by = c(""GeoId"" = ""iso2c"")) %>% "
"0","  left_join(bm_med_beds %>% select(med_beds = ""SH.MED.BEDS.ZS"", iso2c)"
"0","              ,by = c(""GeoId"" = ""iso2c""))"
"0",""
"0","dados_com_estatisticas <- dados_com_estatisticas %>% "
"0","  mutate(cases_per_1000 = sum_cases/(population/1000),"
"0","         med_bed_need_est = cases_per_1000 * 0.2)"
"0",""
"0","dados_selecionados_estat <- dados_com_estatisticas %>% "
"0","  filter(GeoId %in% c('BR','US','CN','FR','IT','ES','KR'))"
"0",""
"0",""
"0","dados_rotulos <- dados_selecionados_estat %>% "
"0","  filter(GeoId %in% c('BR','US','CN','FR','IT','ES','KR')) %>%"
"0","  group_by(GeoId) %>% "
"0","  arrange(desc(cases_per_1000)) %>% "
"0","  slice(1) "
"0",""
"0","p<- dados_selecionados_estat %>% "
"0","  ggplot(aes(x=days_from_100th, y=cases_per_1000, color=GeoId, linetype=GeoId, label=GeoId)) + geom_line(size=1)+ "
"0","  xlim(0,80)+ labs(title = paste(""Casos por 1000 habitantes - "",format(Sys.time(), ""%d/%m/%Y"")), caption = ""Os dados são atualizados diariamente.\n Fonte:https://www.ecdc.europa.eu/sites/default/files/documents/COVID-19-geographic-disbtribution-worldwide"") + xlab(""Dias desde 100º caso"") + ylab(""Casos confirmados/1000 habitantes"") +"
"0","  scale_color_manual(name=""País"",labels=labels,   breaks=breaks,values=c(""red"",""#bdc2b0"",'#cee588','#ff9872','#95b6cf','#455a64',""#f9d84e""))+"
"0","  scale_linetype_manual(name=""País"",labels=labels, breaks=breaks, values=c(1,2,3,4,5,6,7)) +theme_minimal()"
"0",""
"0","p %>% ggplotly()"
