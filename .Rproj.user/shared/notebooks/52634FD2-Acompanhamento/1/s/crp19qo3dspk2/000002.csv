"0","## create the colors quantiles"
"0","binpal <- colorQuantile(heat.colors(10), shp_sf_last_data$confirmed_per_100k_inhabitants, n = 10, reverse = T)"
"0",""
"0","# plot heatmap of Covid-19 cases in SC"
"0","leaflet(shp_sf_last_data) %>%"
"0","  addProviderTiles(providers$CartoDB.Positron) %>%"
"0","  addPolygons(data = shp_sf_last_data,"
"0","              smoothFactor = 0.5,"
"0","              fillOpacity = 0.5,"
"0","              weight = 0.5,"
"0","              color = ~binpal(confirmed_per_100k_inhabitants),"
"0","              opacity = 0.8,"
"0","              highlightOptions = highlightOptions(color = ""black"","
"0","                                                  weight = 2,"
"0","                                                  bringToFront = TRUE),"
"0","              popup = ~paste(sep = "" "","
"0","                             ""<b>Cidade: </b>"", shp_sf_last_data$city, ""<br>"","
"0","                             ""<b>Casos confrmados: </b>"", shp_sf_last_data$confirmed, ""<br>"","
"0","                             ""<b>Casos por 100k habitantes: </b>"", shp_sf_last_data$confirmed_per_100k_inhabitants)) %>% "
"0","        addLegend(""bottomright"","
"0","                  title = ""Casos confirmados por<br>100k habitantes"", "
"0","                  pal = binpal, "
"0","                  values = ~confirmed_per_100k_inhabitants, "
"0","                  opacity = 0.8,"
"0","                  labFormat = function(type, cuts, p) {"
"0","                    n = length(cuts)"
"0","                    p = paste0(round(p * 100), '%')"
"0","                    cuts = paste0(formatC(cuts[-n]), "" - "", formatC(cuts[-1]))"
"0","                    # mouse over the legend labels to see the percentile ranges"
"0","                    paste0('<span title=""', p[-n], "" - "", p[-1], '"">', cuts,'</span>')})"
