"0","# Credido ao Wison Cota por fazer essa agregação"
"0","casos_por_estado <- readr::read_csv(""https://raw.githubusercontent.com/wcota/covid19br/master/cases-brazil-states.csv"")"
"0","pop_por_cidade <-  readr::read_csv(""cidades.csv"")"
"0","pop_por_estado <- pop_por_cidade %>% "
"0","  group_by(uf) %>% "
"0","  summarise(pop_2019 = sum(Pop_2019))"
"0",""
"0",""
"0","casos_por_estado_d0 <- casos_por_estado  %>% "
"0","  filter(totalCases > 0 ) %>% "
"0","  arrange(date,state) %>%"
"0","  group_by(state) %>% "
"0","  mutate(days_from_first = as.Date(date, format= ""%Y-%m-%d"") - as.Date(min(date), format= ""%Y-%m-%d""),"
"0","         g_new_cases = ((newCases- lag(newCases))/lag(newCases))*100,"
"0","         g_total_cases = ((totalCases- lag(totalCases))/lag(totalCases))*100"
"0","        ) %>% "
"0","  select(date,state,days_from_first,g_new_cases,g_total_cases)"
"0",""
"0","casos_por_estado_d10 <- casos_por_estado  %>% "
"0","  filter(totalCases > 10 ) %>% "
"0","  arrange(date,state) %>%"
"0","  group_by(state) %>% "
"0","  mutate(days_from_10th = as.Date(date, format= ""%Y-%m-%d"") - as.Date(min(date), format= ""%Y-%m-%d"")"
"0","        ) %>% "
"0","  select(date,state,days_from_10th)"
"0",""
"0",""
"0",""
"0","casos_por_estado <- casos_por_estado %>% "
"0","  left_join(casos_por_estado_d0, by = c(""date""= ""date"", ""state"" = ""state"")) %>% "
"0","  left_join(casos_por_estado_d10, by = c(""date""= ""date"", ""state"" = ""state"")) %>% "
"0","  left_join(pop_por_estado, by = c(""state"" = ""uf"")) %>% "
"0","  mutate(total_cases_pop = totalCases/(pop_2019 / 100000))"
"0",""
"0",""
"0","dados_rotulos <- casos_por_estado %>% "
"0","  filter(totalCases > 10 & state != 'TOTAL') %>%"
"0","  group_by(state) %>% "
"0","  arrange(desc(totalCases)) %>% "
"0","  slice(1) "
"0",""
"0","p_lin <- casos_por_estado %>% "
"0","  filter(totalCases > 10 & state != 'TOTAL' & date < Sys.Date()) %>% "
"0","  ggplot(aes(x=days_from_10th, y=totalCases, color=state,linetype=state,label=state)) + geom_line(size=1)+ "
"0","  labs(title = paste(""Evolução por estado (linear) - "",format(Sys.time(), ""%d/%m/%Y"")), caption = ""Em escala logaritmica. Apenas estados com mais de 10 casos.Os dados são atualizados diariamente.\n Fonte:https://raw.githubusercontent.com/wcota/covid19br/master/cases-brazil-states.csv"") + xlab(""Dias desde 10º caso"") + ylab(""Casos confirmados"")+ theme_minimal()"
"0",""
"0","p_lin %>% ggplotly()"
